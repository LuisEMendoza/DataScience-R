---
title: "Visualización de datos"
format: html
editor: visual
---

## Introducción {#quarto}

Aunque parezca lo más práctico comenzar con la organización y transformación de los datos, comenzaremos por el otro lado. Veamos primero cómo crear gráficos coherentes y hasta elegantes.

Utilizaremos el paquete **ggplot**, que utiliza un sistema conocido como la *gramática de gráficos*. Carguemos dicho paquete, además del conjunto de datos a utilizar:

```{r}
library(tidyverse)
library(datos)
```

## Nuestro primer gráfico {#nuestro-primer-gráfico}

Crearemos nuestro primer gráfico con **ggplot** y probaremos con datos reales que a mayor tamaño de motor de un coche, mayor consumo de gasolina tendrá. Para ello, debemos estar seguros de haber cargado correctamente tanto el Tydiverse como el conjunto `datos`. Enseguida mostraremos un *data frame,* lo cual es un conjunto rectangular de datos organizados en columnas (que vienen siendo las variables) y filas (éstas son las observaciones). Este *data frame* es llamado `millas`, el cual está contenido en `datos` (`datos::millas`).

```{r}
millas
```

Podemos observar que nos muestra sólo las primeras 10 filas e incluso menciona lo faltante: 224 filas y una columna adicionales. Es solo la visualización, el conjunto se encuentra completo en la memoria de R, por comodidad y practicidad es mejor mostrarlos así. También es posible notar que los nombres de las variables no aparecen completos, pero se especifican en la parte inferior del resultado arrojado.

De todas las columnas / variables mostradas, nos interesan la `cilindrada` (lo cual se refiere al tamaño del motor en litros) y `autopista`, que muestra la eficiencia del coche en millas recorridas por galón de combustible.

### Gráfico de dispersión con ggplot {#gráfico-de-dispersión-con-ggplot}

Para poder mostrar un gráfico con las variables mencionadas anteriormente, debemos introducir el siguiente código:

```{r}
ggplot(data = millas) +
  geom_point(mapping = aes(x = cilindrada, y = autopista))
```

Este gráfico muestra una relación negativa entre el tamaño del motor y la eficiencia del combustible. O lo que es lo mismo, a mayor tamaño de motor, menos eficiente el combustible.

Expliquemos las líneas que ejecutamos para obtener el gráfico. En primer lugar, usamos la función `ggplot`. El primer argumento de esta función es el conjunto de datos a graficar. Sin embargo, no resulta atractivo el resultado si lo dejamos solo con ese argumento (mostrará un gráfico vacío). Notemos que en segundo lugar, tenemos un signo "+". Éste nos indica que estamos agregando una capa a `ggplot()`, la cual es definida por la función `geom_point`, que no es otra cosa más que una capa de puntos. Esta capa se corresponde con un diagrama de dispersión.

El argumento de `geom_point()` es `mapping`, el cual define cómo se asignan las variables a la parte visual. Podemos notar que aparece emparejado con la función `aes()`, la cual determina cuál variable se corresponde con el eje *x* y cuál al eje *y* del plano o gráfico. **ggplot** buscará las variables dentro del conjunto de datos.
